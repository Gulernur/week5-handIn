<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <title>Exercise 1</title>
</head>
<body>
<div>
    <h1> Fetch one or all users </h1>
    <label for="input"></label><input id = "input" type = "text" placeholder = "Please enter valid id">
    <button id = "fetch-user"> Get entered user </button>
    <button id = "fetch-all-users"> Get all users </button>

    <div>
        <table class="table" id = "single-user" style = "display: none">
            <thead>
            <tr>
                <th>Name</th>
                <th>Phone number</th>
                <th>Email</th>
                <th>Address</th>
            </tr>
            </thead>
            <tbody id="tbody"></tbody>
        </table>
    </div>

    <div>
        <table class="table" id = "all-users" style = "display: none">
            <thead>
            <tr>
                <th>Name</th>
                <th>Phone</th>
            </tr>
            </thead>
            <tbody id="tbody2"></tbody>
        </table>
    </div>
</div>

<script>
    const URL = "https://jsonplaceholder.typicode.com/users/"
    document.getElementById("fetch-user").onclick = fetchUser;
    document.getElementById("fetch-all-users").onclick = fetchAllUsers;

    function fetchUser(){
        fetch(URL)
            .then((r) => {
                if (!r.ok) {
                    return Promise.reject("The user could not be found in the system")
                }
                return r.json()
            })
            /*.then(users => {
                const con = document.getElementById("fetch-all-users")

            })
            .catch(e => {
                console.error(e)
            })*/
    }

    function fetchAllUsers(){
        document.getElementById("single-user").style.display = "none"
        fetch(URL)
            .then(resolve => resolve.json())
            .then(users => {
                const tableRows = users.map(user => `
                    <tr>
                        <td>${user.name} </td>
                        <td>${user.phone} </td>
                    </tr>
                `).join("")
                document.getElementById("all-users").style = "block"
                document.getElementById("tbody2").innerHTML = tableRows
            })
    }
</script>

</body>
</html>